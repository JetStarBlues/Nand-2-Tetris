'''------------------------------ Imports ------------------------------'''

import Components._0__globalConstants as GC


'''----------------------------- Main -----------------------------------'''

fxType = {
	
	'AA_IMMED'     : '11011',
	'DST_EQ_IOBUS' : '11100',
	'RETI'         : '11101',
	'NOP'          : '11110',
	'HALT'         : '11111',
}

comp = {

	'0'                   : '00000',
	'1'                   : '00001',
	'-1'                  : '00010',
	'([DABM])'            : '00011',  # x
	'!([DABM])'           : '00100',  # ! x
	'-([DABM])'           : '00101',  # - x
	'([DABM])\+1'         : '00110',  # x + 1
	'([DABM])-1'          : '00111',  # x - 1
	'([DABM])\+([DABM])'  : '01000',  # x + y
	'([DABM])-([DABM])'   : '01001',  # x - y
	'([DABM])&([DABM])'   : '01010',  # x & y
	'([DABM])\|([DABM])'  : '01011',  # x | y
	'([DABM])\^([DABM])'  : '01100',  # x ^ y
	'([DABM])>>([DABM])'  : '01101',  # x >> y
	'([DABM])<<([DABM])'  : '01110',  # x << y
	'([DABM])\*([DABM])'  : '01111',  # x * y
	'([DABM])/([DABM])'   : '10000',  # x / y
}

xySel = {

	'D' : '00',
	'A' : '01',
	'B' : '10',
	'M' : '11',
}

dest = {

	'NULL' : '000',
	'D'    : '001',
	'A'    : '010',
	'B'    : '011',
	'M'    : '100',
}

jump = {

	'NULL' : '000',
	'JGT'  : '001',
	'JEQ'  : '010',
	'JGE'  : '011',
	'JLT'  : '100',
	'JNE'  : '101',
	'JLE'  : '110',
	'JMP'  : '111'
}

globalAddresses = {

	'@R0'       : '@0',
	'@R1'       : '@1',
	'@R2'       : '@2',
	'@R3'       : '@3',
	'@R4'       : '@4',
	'@R5'       : '@5',
	'@R6'       : '@6',
	'@R7'       : '@7',
	'@R8'       : '@8',
	'@R9'       : '@9',
	'@R10'      : '@10',
	'@R11'      : '@11',
	'@R12'      : '@12',
	'@R13'      : '@13',
	'@R14'      : '@14',
	'@R15'      : '@15',

	# VM structure
	'@SP'       : '@0',
	'@LCL'      : '@1',
	'@ARG'      : '@2',
	'@THIS'     : '@3',
	'@THAT'     : '@4',
	'@TEMP0'    : '@5',
	'@TEMP1'    : '@6',
	'@TEMP2'    : '@7',
	'@TEMP3'    : '@8',
	'@TEMP4'    : '@9',
	'@TEMP5'    : '@10',
	'@TEMP6'    : '@11',
	'@TEMP7'    : '@12',
	'@GP0'      : '@13',
	'@GP1'      : '@14',
	'@GP2'      : '@15',

	'@SCREEN'   : '@' + str( GC.SCREEN_MEMORY_MAP ),
	'@KEYBOARD' : '@' + str( GC.KEYBOARD_MEMORY_MAP ),
	'@MOUSE'    : '@' + str( GC.MOUSE_MEMORY_MAP ),
}

def flip( d ):

	return { v : k for k, v in d.items() }

# comp_   = flip( comp )
dest_   = flip( dest )
jump_   = flip( jump )
xySel_  = flip( xySel )
fxType_ = flip( fxType )

comp_ = {

	'00000' : '0',
	'00001' : '1',
	'00010' : '- 1',
	'00011' : 'x',
	'00100' : '! x',
	'00101' : '- x',
	'00110' : 'x + 1',
	'00111' : 'x - 1',
	'01000' : 'x + y',
	'01001' : 'x - y',
	'01010' : 'x & y',
	'01011' : 'x | y',
	'01100' : 'x ^ y',
	'01101' : 'x >> y',
	'01110' : 'x << y',
	'01111' : 'x * y',
	'10000' : 'x / y',
}
