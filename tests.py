''''''''''''''''''''''''''' testing helpers '''''''''''''''''''''''''''

# Truth tables
test2 = [[0,0],[0,1],[1,0],[1,1]]

test3 = [[0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[1,0,1],[1,1,0],[1,1,1]]

test4 = [[0,0,0,0],[0,0,0,1],[0,0,1,0],[0,0,1,1],[0,1,0,0],[0,1,0,1],[0,1,1,0],[0,1,1,1],
		 [1,0,0,0],[1,0,0,1],[1,0,1,0],[1,0,1,1],[1,1,0,0],[1,1,0,1],[1,1,1,0],[1,1,1,1]]

def b2d(s):
    sum = 0
    for i in range(len(s)):
        if s[i] == '1':
            v = len(s)-1 - i
            sum += 2**v
    print(sum)


# Mux tests
testM = [
	["0000000000000000", "0000000000000000", "0", "0000000000000000"],
	["0000000000000000", "0000000000000000", "1", "0000000000000000"],
	["0000000000000000", "0001001000110100", "0", "0000000000000000"],
	["0000000000000000", "0001001000110100", "1", "0001001000110100"],
	["1001100001110110", "0000000000000000", "0", "1001100001110110"],
	["1001100001110110", "0000000000000000", "1", "0000000000000000"],
	["1010101010101010", "0101010101010101", "0", "1010101010101010"],
	["1010101010101010", "0101010101010101", "1", "0101010101010101"]
]

testM2 = [
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 0,0, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 0,1, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 1,0, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 1,1, "0000000000000000"],
	["0001001000110100", "1001100001110110", "1010101010101010", "0101010101010101", 0,0, "0001001000110100"],
	["0001001000110100", "1001100001110110", "1010101010101010", "0101010101010101", 0,1, "1001100001110110"],
	["0001001000110100", "1001100001110110", "1010101010101010", "0101010101010101", 1,0, "1010101010101010"],
	["0001001000110100", "1001100001110110", "1010101010101010", "0101010101010101", 1,1, "0101010101010101"],
]

testM3 = [
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 0,0,0, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 0,0,1, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 0,1,0, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 0,1,1, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 1,0,0, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 1,0,1, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 1,1,0, "0000000000000000"],
	["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000", 1,1,1, "0000000000000000"],
	["0001001000110100", "0010001101000101", "0011010001010110", "0100010101100111", "0101011001111000", "0110011110001001", "0111100010011010", "1000100110101011", 0,0,0, "0001001000110100"],
	["0001001000110100", "0010001101000101", "0011010001010110", "0100010101100111", "0101011001111000", "0110011110001001", "0111100010011010", "1000100110101011", 0,0,1, "0010001101000101"],
	["0001001000110100", "0010001101000101", "0011010001010110", "0100010101100111", "0101011001111000", "0110011110001001", "0111100010011010", "1000100110101011", 0,1,0, "0011010001010110"],
	["0001001000110100", "0010001101000101", "0011010001010110", "0100010101100111", "0101011001111000", "0110011110001001", "0111100010011010", "1000100110101011", 0,1,1, "0100010101100111"],
	["0001001000110100", "0010001101000101", "0011010001010110", "0100010101100111", "0101011001111000", "0110011110001001", "0111100010011010", "1000100110101011", 1,0,0, "0101011001111000"],
	["0001001000110100", "0010001101000101", "0011010001010110", "0100010101100111", "0101011001111000", "0110011110001001", "0111100010011010", "1000100110101011", 1,0,1, "0110011110001001"],
	["0001001000110100", "0010001101000101", "0011010001010110", "0100010101100111", "0101011001111000", "0110011110001001", "0111100010011010", "1000100110101011", 1,1,0, "0111100010011010"],
	["0001001000110100", "0010001101000101", "0011010001010110", "0100010101100111", "0101011001111000", "0110011110001001", "0111100010011010", "1000100110101011", 1,1,1, "1000100110101011"],
]


# ALU test
def testALU(x,y):
	N = len(x) #16
	aluTruthTable = [
		[1, 0, 1, 0, 1, 0, 0],
		[1, 1, 1, 1, 1, 1, 1],
		[1, 1, 1, 0, 1, 0, _negate(one(N))],
		[0, 0, 1, 1, 0, 0, x],
		[1, 1, 0, 0, 0, 0, y],
		[0, 0, 1, 1, 0, 1, _notN(N,x)],
		[1, 1, 0, 0, 0, 1, _notN(N,y)],
		[0, 0, 1, 1, 1, 1, _negate(x)],
		[1, 1, 0, 0, 1, 1, _negate(y)],
		[0, 1, 1, 1, 1, 1, _increment(x)],
		[1, 1, 0, 1, 1, 1, _increment(y)],
		[0, 0, 1, 1, 1, 0, _addN(N,x,_negate(one(N)))],
		[1, 1, 0, 0, 1, 0, _addN(N,y,_negate(one(N)))],
		[0, 0, 0, 0, 1, 0, _addN(N,x,y)],
		[0, 1, 0, 0, 1, 1, _addN(N,x,_negate(y))],
		[0, 0, 0, 1, 1, 1, _addN(N,_negate(x),y)],
		[0, 0, 0, 0, 0, 0, _andN(N,x,y)],
		[0, 1, 0, 1, 0, 1, _orN(N,x,y)]
	]

	for v in aluTruthTable:
		out = _ALU(x,y,v[0],v[1],v[2],v[3],v[4],v[5])		
		print(out[0], out[0]==v[6] )

testALU1 = [
	["0000000000000000", "1111111111111111", 1, 0, 1, 0, 1, 0, "0000000000000000"],
	["0000000000000000", "1111111111111111", 1, 1, 1, 1, 1, 1, "0000000000000001"],
	["0000000000000000", "1111111111111111", 1, 1, 1, 0, 1, 0, "1111111111111111"],
	["0000000000000000", "1111111111111111", 0, 0, 1, 1, 0, 0, "0000000000000000"],
	["0000000000000000", "1111111111111111", 1, 1, 0, 0, 0, 0, "1111111111111111"],
	["0000000000000000", "1111111111111111", 0, 0, 1, 1, 0, 1, "1111111111111111"],
	["0000000000000000", "1111111111111111", 1, 1, 0, 0, 0, 1, "0000000000000000"],
	["0000000000000000", "1111111111111111", 0, 0, 1, 1, 1, 1, "0000000000000000"],
	["0000000000000000", "1111111111111111", 1, 1, 0, 0, 1, 1, "0000000000000001"],
	["0000000000000000", "1111111111111111", 0, 1, 1, 1, 1, 1, "0000000000000001"],
	["0000000000000000", "1111111111111111", 1, 1, 0, 1, 1, 1, "0000000000000000"],
	["0000000000000000", "1111111111111111", 0, 0, 1, 1, 1, 0, "1111111111111111"],
	["0000000000000000", "1111111111111111", 1, 1, 0, 0, 1, 0, "1111111111111110"],
	["0000000000000000", "1111111111111111", 0, 0, 0, 0, 1, 0, "1111111111111111"],
	["0000000000000000", "1111111111111111", 0, 1, 0, 0, 1, 1, "0000000000000001"],
	["0000000000000000", "1111111111111111", 0, 0, 0, 1, 1, 1, "1111111111111111"],
	["0000000000000000", "1111111111111111", 0, 0, 0, 0, 0, 0, "0000000000000000"],
	["0000000000000000", "1111111111111111", 0, 1, 0, 1, 0, 1, "1111111111111111"],
	["0101101110100000", "0001111011010010", 1, 0, 1, 0, 1, 0, "0000000000000000"],
	["0101101110100000", "0001111011010010", 1, 1, 1, 1, 1, 1, "0000000000000001"],
	["0101101110100000", "0001111011010010", 1, 1, 1, 0, 1, 0, "1111111111111111"],
	["0101101110100000", "0001111011010010", 0, 0, 1, 1, 0, 0, "0101101110100000"],
	["0101101110100000", "0001111011010010", 1, 1, 0, 0, 0, 0, "0001111011010010"],
	["0101101110100000", "0001111011010010", 0, 0, 1, 1, 0, 1, "1010010001011111"],
	["0101101110100000", "0001111011010010", 1, 1, 0, 0, 0, 1, "1110000100101101"],
	["0101101110100000", "0001111011010010", 0, 0, 1, 1, 1, 1, "1010010001100000"],
	["0101101110100000", "0001111011010010", 1, 1, 0, 0, 1, 1, "1110000100101110"],
	["0101101110100000", "0001111011010010", 0, 1, 1, 1, 1, 1, "0101101110100001"],
	["0101101110100000", "0001111011010010", 1, 1, 0, 1, 1, 1, "0001111011010011"],
	["0101101110100000", "0001111011010010", 0, 0, 1, 1, 1, 0, "0101101110011111"],
	["0101101110100000", "0001111011010010", 1, 1, 0, 0, 1, 0, "0001111011010001"],
	["0101101110100000", "0001111011010010", 0, 0, 0, 0, 1, 0, "0111101001110010"],
	["0101101110100000", "0001111011010010", 0, 1, 0, 0, 1, 1, "0011110011001110"],
	["0101101110100000", "0001111011010010", 0, 0, 0, 1, 1, 1, "1100001100110010"],
	["0101101110100000", "0001111011010010", 0, 0, 0, 0, 0, 0, "0001101010000000"],
	["0101101110100000", "0001111011010010", 0, 1, 0, 1, 0, 1, "0101111111110010"],
]

testALU2 = [
	["0000000000000000", "1111111111111111", 1, 0, 1, 0, 1, 0, "0000000000000000", 1, 0],
	["0000000000000000", "1111111111111111", 1, 1, 1, 1, 1, 1, "0000000000000001", 0, 0],
	["0000000000000000", "1111111111111111", 1, 1, 1, 0, 1, 0, "1111111111111111", 0, 1],
	["0000000000000000", "1111111111111111", 0, 0, 1, 1, 0, 0, "0000000000000000", 1, 0],
	["0000000000000000", "1111111111111111", 1, 1, 0, 0, 0, 0, "1111111111111111", 0, 1],
	["0000000000000000", "1111111111111111", 0, 0, 1, 1, 0, 1, "1111111111111111", 0, 1],
	["0000000000000000", "1111111111111111", 1, 1, 0, 0, 0, 1, "0000000000000000", 1, 0],
	["0000000000000000", "1111111111111111", 0, 0, 1, 1, 1, 1, "0000000000000000", 1, 0],
	["0000000000000000", "1111111111111111", 1, 1, 0, 0, 1, 1, "0000000000000001", 0, 0],
	["0000000000000000", "1111111111111111", 0, 1, 1, 1, 1, 1, "0000000000000001", 0, 0],
	["0000000000000000", "1111111111111111", 1, 1, 0, 1, 1, 1, "0000000000000000", 1, 0],
	["0000000000000000", "1111111111111111", 0, 0, 1, 1, 1, 0, "1111111111111111", 0, 1],
	["0000000000000000", "1111111111111111", 1, 1, 0, 0, 1, 0, "1111111111111110", 0, 1],
	["0000000000000000", "1111111111111111", 0, 0, 0, 0, 1, 0, "1111111111111111", 0, 1],
	["0000000000000000", "1111111111111111", 0, 1, 0, 0, 1, 1, "0000000000000001", 0, 0],
	["0000000000000000", "1111111111111111", 0, 0, 0, 1, 1, 1, "1111111111111111", 0, 1],
	["0000000000000000", "1111111111111111", 0, 0, 0, 0, 0, 0, "0000000000000000", 1, 0],
	["0000000000000000", "1111111111111111", 0, 1, 0, 1, 0, 1, "1111111111111111", 0, 1],
	["0000000000010001", "0000000000000011", 1, 0, 1, 0, 1, 0, "0000000000000000", 1, 0],
	["0000000000010001", "0000000000000011", 1, 1, 1, 1, 1, 1, "0000000000000001", 0, 0],
	["0000000000010001", "0000000000000011", 1, 1, 1, 0, 1, 0, "1111111111111111", 0, 1],
	["0000000000010001", "0000000000000011", 0, 0, 1, 1, 0, 0, "0000000000010001", 0, 0],
	["0000000000010001", "0000000000000011", 1, 1, 0, 0, 0, 0, "0000000000000011", 0, 0],
	["0000000000010001", "0000000000000011", 0, 0, 1, 1, 0, 1, "1111111111101110", 0, 1],
	["0000000000010001", "0000000000000011", 1, 1, 0, 0, 0, 1, "1111111111111100", 0, 1],
	["0000000000010001", "0000000000000011", 0, 0, 1, 1, 1, 1, "1111111111101111", 0, 1],
	["0000000000010001", "0000000000000011", 1, 1, 0, 0, 1, 1, "1111111111111101", 0, 1],
	["0000000000010001", "0000000000000011", 0, 1, 1, 1, 1, 1, "0000000000010010", 0, 0],
	["0000000000010001", "0000000000000011", 1, 1, 0, 1, 1, 1, "0000000000000100", 0, 0],
	["0000000000010001", "0000000000000011", 0, 0, 1, 1, 1, 0, "0000000000010000", 0, 0],
	["0000000000010001", "0000000000000011", 1, 1, 0, 0, 1, 0, "0000000000000010", 0, 0],
	["0000000000010001", "0000000000000011", 0, 0, 0, 0, 1, 0, "0000000000010100", 0, 0],
	["0000000000010001", "0000000000000011", 0, 1, 0, 0, 1, 1, "0000000000001110", 0, 0],
	["0000000000010001", "0000000000000011", 0, 0, 0, 1, 1, 1, "1111111111110010", 0, 1],
	["0000000000010001", "0000000000000011", 0, 0, 0, 0, 0, 0, "0000000000000001", 0, 0],
	["0000000000010001", "0000000000000011", 0, 1, 0, 1, 0, 1, "0000000000010011", 0, 0],
]


